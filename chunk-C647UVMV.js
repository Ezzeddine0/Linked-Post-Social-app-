import{g as G,h as $}from"./chunk-2NGON64K.js";import{a as U,b as g,c as j,d as z,g as Z,h as H,i as J,j as K,k as Q,l as W,n as X,p as Y}from"./chunk-YIGV4GGE.js";import{h as V,k as D}from"./chunk-OYOCP6AY.js";import{$ as x,Bb as s,Cb as T,Db as L,Ib as M,Jb as A,Kb as C,Lb as q,Ma as r,Mb as I,Y as b,ab as h,eb as w,gb as p,ib as v,jb as B,kb as O,lb as N,mb as n,nb as i,ob as u,sb as E,tb as y,wb as P}from"./chunk-SKZUZ3B6.js";var R=(l,c)=>({"is-valid":l,"is-invalid":c}),ee=()=>["male","female"];function te(l,c){l&1&&(n(0,"p",6),s(1,"Name must be between 3 and 15 char"),i())}function re(l,c){l&1&&(n(0,"p",6),s(1,"Enter a valid Email"),i())}function ie(l,c){if(l&1&&(n(0,"ul",11)(1,"p"),s(2,"Password must contain:"),i(),n(3,"li",22),u(4,"i",23),s(5," At least 8 characters "),i(),n(6,"li",22),u(7,"i",23),s(8," One uppercase letter "),i(),n(9,"li",22),u(10,"i",23),s(11," One lowercase letter "),i(),n(12,"li",22),u(13,"i",23),s(14," One number "),i(),n(15,"li",22),u(16,"i",23),s(17," One special character "),i()()),l&2){let e=y();r(3),p("text-success",e.passwordRules.length)("text-danger",!e.passwordRules.length),r(),p("fa-check",e.passwordRules.length)("fa-xmark",!e.passwordRules.length),r(2),p("text-success",e.passwordRules.uppercase)("text-danger",!e.passwordRules.uppercase),r(),p("fa-check",e.passwordRules.uppercase)("fa-xmark",!e.passwordRules.uppercase),r(2),p("text-success",e.passwordRules.lowercase)("text-danger",!e.passwordRules.lowercase),r(),p("fa-check",e.passwordRules.lowercase)("fa-xmark",!e.passwordRules.lowercase),r(2),p("text-success",e.passwordRules.number)("text-danger",!e.passwordRules.number),r(),p("fa-check",e.passwordRules.number)("fa-xmark",!e.passwordRules.number),r(2),p("text-success",e.passwordRules.special)("text-danger",!e.passwordRules.special),r(),p("fa-check",e.passwordRules.special)("fa-xmark",!e.passwordRules.special)}}function le(l,c){l&1&&(n(0,"div",6)(1,"p"),s(2,"Password is not matched!"),i()())}function ne(l,c){if(l&1&&(n(0,"div",17),u(1,"input",24),n(2,"label",25),s(3),q(4,"titlecase"),i()()),l&2){let e,f=c.$implicit,t=y();r(),P("id","gender-",f,""),w("value",f)("ngClass",C(9,R,!((e=t.registerForm.get("gender"))!=null&&e.errors)&&(((e=t.registerForm.get("gender"))==null?null:e.touched)||((e=t.registerForm.get("gender"))==null?null:e.dirty)),((e=t.registerForm.get("gender"))==null?null:e.errors)&&(((e=t.registerForm.get("gender"))==null?null:e.touched)||((e=t.registerForm.get("gender"))==null?null:e.dirty)))),r(),P("for","gender-",f,""),r(),L(" ",I(4,7,f)," ")}}function se(l,c){l&1&&(n(0,"div",18),s(1,"Please select your gender."),i())}function ae(l,c){if(l&1&&(n(0,"p",6),s(1),i()),l&2){let e=y();r(),T(e.errorMessage)}}function oe(l,c){l&1&&u(0,"i",20)}var we=(()=>{class l{constructor(){this._FormBuilder=b(W),this._Router=b(G),this._UsersService=b(Y),this.registerForm=this._FormBuilder.group({name:[null,[g.required,g.minLength(3),g.maxLength(15)]],email:[null,[g.required,g.email]],password:[null,[g.required,g.pattern(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/)]],rePassword:[null,[g.required]],dateOfBirth:[null,[g.required]],gender:[null,[g.required]]},{validators:[this.matchPassword]}),this.isLoading=!1,this.errorMessage="",this.passwordRules={length:!1,uppercase:!1,lowercase:!1,number:!1,special:!1},this.passwordStarted=!1}matchPassword(e){return e.get("password")?.value===e.get("rePassword")?.value?null:{mismatch:!0}}signupSubmit(){this.registerForm.valid?(this.isLoading=!0,this.errorMessage="",this._UsersService.signup(this.registerForm.value).subscribe({next:e=>{console.log(e),this._Router.navigate(["/login"])},error:e=>{console.log(e),this.isLoading=!1,this.errorMessage=e.error.error}})):this.registerForm.invalid;{this.registerForm.markAllAsTouched();return}}checkPasswordStrength(){let e=this.registerForm.get("password")?.value||"";this.passwordStarted=e.length>0,this.passwordRules.length=e.length>=8,this.passwordRules.uppercase=/[A-Z]/.test(e),this.passwordRules.lowercase=/[a-z]/.test(e),this.passwordRules.number=/[0-9]/.test(e),this.passwordRules.special=/[#?!@$%^&*-]/.test(e),Object.values(this.passwordRules).every(Boolean)?this.registerForm.get("password")?.setErrors(null):this.registerForm.get("password")?.setErrors({weak:!0})}static{this.\u0275fac=function(f){return new(f||l)}}static{this.\u0275cmp=x({type:l,selectors:[["app-register"]],standalone:!0,features:[M],decls:41,vars:26,consts:[[1,"container","bg-main-light","shadow","show","p-5","rounded"],[1,"mb-4"],["action","",3,"submit","formGroup"],[1,"my-3"],["for","name"],["id","name","name","name","formControlName","name","type","text",1,"form-control",3,"ngClass"],[1,"alert","alert-danger"],["for","email"],["id","email","name","email","formControlName","email","type","email",1,"form-control",3,"ngClass"],["for","password"],["id","password","name","password","formControlName","password","type","password",1,"form-control",3,"input","ngClass"],[1,"list-unstyled","mt-4"],["for","rePassword"],["id","rePassword","name","rePassword","formControlName","rePassword","type","password",1,"form-control"],["for","dateOfBirth"],["id","dateOfBirth","name","dateOfBirth","formControlName","dateOfBirth","type","date",1,"form-control",3,"ngClass"],[1,"d-block","mb-2","fw-semibold"],[1,"form-check","form-check-inline","text-black"],[1,"invalid-feedback","d-block"],["type","submit",1,"btn-main","w-100","fs-4",3,"disabled"],[1,"fa-solid","fa-circle-notch","fa-spin"],["routerLink","/login",1,"mt-3","alert-link","text-main","cr","registerbutt"],[1,"ms-4"],[1,"fa"],["type","radio","name","gender","formControlName","gender",1,"form-check-input",3,"id","value","ngClass"],[1,"form-check-label",3,"for"]],template:function(f,t){if(f&1&&(n(0,"section",0)(1,"h2",1),s(2,"Register"),i(),n(3,"div")(4,"form",2),E("submit",function(){return t.signupSubmit()}),n(5,"div",3)(6,"label",4),s(7,"Full Name:"),i(),u(8,"input",5),h(9,te,2,0,"p",6),i(),n(10,"div",3)(11,"label",7),s(12,"Email Addres:"),i(),u(13,"input",8),h(14,re,2,0,"p",6),i(),n(15,"div",3)(16,"label",9),s(17,"Password:"),i(),n(18,"input",10),E("input",function(){return t.checkPasswordStrength()}),i(),h(19,ie,18,40,"ul",11),i(),n(20,"div",3)(21,"label",12),s(22,"Confirm Password:"),i(),u(23,"input",13),h(24,le,3,0,"div",6),i(),n(25,"div",3)(26,"label",14),s(27,"Date of Birth:"),i(),u(28,"input",15),i(),n(29,"div",3)(30,"label",16),s(31,"Gender:"),i(),O(32,ne,5,12,"div",17,B),h(34,se,2,0,"div",18),i(),h(35,ae,2,1,"p",6),n(36,"button",19),s(37," Sign up "),h(38,oe,1,0,"i",20),i(),n(39,"p",21),s(40," have an account? Sign in "),i()()()()),f&2){let a,F,o,_,m,k,d,S;r(4),w("formGroup",t.registerForm),r(4),w("ngClass",C(13,R,!((a=t.registerForm.get("name"))!=null&&a.errors)&&(((a=t.registerForm.get("name"))==null?null:a.touched)||((a=t.registerForm.get("name"))==null?null:a.dirty)),((a=t.registerForm.get("name"))==null?null:a.errors)&&(((a=t.registerForm.get("name"))==null?null:a.touched)||((a=t.registerForm.get("name"))==null?null:a.dirty)))),r(),v(9,(F=t.registerForm.get("name"))!=null&&F.errors&&((F=t.registerForm.get("name"))!=null&&F.touched||(F=t.registerForm.get("name"))!=null&&F.dirty)?9:-1),r(4),w("ngClass",C(16,R,!((o=t.registerForm.get("email"))!=null&&o.errors)&&(((o=t.registerForm.get("email"))==null?null:o.touched)||((o=t.registerForm.get("email"))==null?null:o.dirty)),((o=t.registerForm.get("email"))==null?null:o.errors)&&(((o=t.registerForm.get("email"))==null?null:o.touched)||((o=t.registerForm.get("email"))==null?null:o.dirty)))),r(),v(14,(_=t.registerForm.get("email"))!=null&&_.errors&&((_=t.registerForm.get("email"))!=null&&_.touched||(_=t.registerForm.get("email"))!=null&&_.dirty)?14:-1),r(4),w("ngClass",C(19,R,!((m=t.registerForm.get("password"))!=null&&m.errors)&&(((m=t.registerForm.get("password"))==null?null:m.touched)||((m=t.registerForm.get("password"))==null?null:m.dirty)),((m=t.registerForm.get("password"))==null?null:m.errors)&&(((m=t.registerForm.get("password"))==null?null:m.touched)||((m=t.registerForm.get("password"))==null?null:m.dirty)))),r(),v(19,t.passwordStarted?19:-1),r(5),v(24,t.registerForm.getError("mismatch")&&((k=t.registerForm.get("rePassword"))!=null&&k.touched)?24:-1),r(4),w("ngClass",C(22,R,!((d=t.registerForm.get("dateOfBirth"))!=null&&d.errors)&&(((d=t.registerForm.get("dateOfBirth"))==null?null:d.touched)||((d=t.registerForm.get("dateOfBirth"))==null?null:d.dirty)),((d=t.registerForm.get("dateOfBirth"))==null?null:d.errors)&&(((d=t.registerForm.get("dateOfBirth"))==null?null:d.touched)||((d=t.registerForm.get("dateOfBirth"))==null?null:d.dirty)))),r(4),N(A(25,ee)),r(2),v(34,(S=t.registerForm.get("gender"))!=null&&S.invalid&&((S=t.registerForm.get("gender"))!=null&&S.touched)?34:-1),r(),v(35,t.errorMessage?35:-1),r(),w("disabled",t.isLoading),r(2),v(38,t.isLoading?38:-1)}},dependencies:[Q,Z,U,H,j,z,X,J,K,V,$,D]})}}return l})();export{we as RegisterComponent};
