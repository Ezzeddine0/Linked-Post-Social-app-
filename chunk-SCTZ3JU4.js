import{a as B,c as $,d as H,e as T,f as U,g as j,m as D,n as Q,o as r}from"./chunk-YIGV4GGE.js";import{s as V}from"./chunk-OYOCP6AY.js";import{$ as P,Ab as F,Bb as a,Db as E,Eb as O,Fb as I,Gb as k,Ib as N,Ma as p,S as v,Y as m,ab as f,ib as g,ja as c,ka as u,mb as s,nb as n,ob as h,pb as w,qa as y,sb as b,tb as x,yb as S,zb as M}from"./chunk-SKZUZ3B6.js";var W=(()=>{class o{constructor(){this._HttpClient=m(V)}createPost(t){return this._HttpClient.post(`${r.baseUrl}/posts`,t)}getAllPosts(t=1,e=50){return this._HttpClient.get(`${r.baseUrl}/posts`,{params:{page:t.toString(),limit:e.toString()}})}getMyPosts(){return this._HttpClient.get(`${r.baseUrl}/users/664bcf3e33da217c4af21f00/posts`)}getSpecificPosts(t){return this._HttpClient.get(`${r.baseUrl}/posts/${t}`)}updatePost(t,e){return this._HttpClient.put(`${r.baseUrl}/posts/${t}`,e)}deletePost(t){return this._HttpClient.delete(`${r.baseUrl}/posts/${t}`)}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275prov=v({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var A=["closeBtn"];function L(o,_){if(o&1&&(s(0,"p",17),a(1),n()),o&2){let t=x();p(),E(" Selected file: ",t.fileName," ")}}function R(o,_){o&1&&a(0," Post ")}function z(o,_){o&1&&a(0," Edit ")}var rt=(()=>{class o{constructor(){this.fileName="",this.postId="",this.postSaved=new y,this._PostsService=m(W)}onFileSelected(t){let e=t.target;if(e.files&&e.files.length>0){let i=e.files[0];this.fileName=i.name,this.savedFile=i}}onSubmit(){let t=new FormData;t.append("body",this.content),this.savedFile&&t.append("image",this.savedFile),(this.postId?this._PostsService.updatePost(this.postId,t):this._PostsService.createPost(t)).subscribe({next:i=>{console.log("Post saved:",i),this.closeBtn.nativeElement.click(),this.postSaved.emit(),this.resetForm()},error:i=>console.log(i)})}resetForm(){this.fileName="",this.content="",this.savedFile=void 0,this.postId=""}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275cmp=P({type:o,selectors:[["app-posts"]],viewQuery:function(e,i){if(e&1&&S(A,5),e&2){let l;M(l=F())&&(i.closeBtn=l.first)}},inputs:{postId:"postId"},outputs:{postSaved:"postSaved"},standalone:!0,features:[N],decls:28,vars:3,consts:[["closeBtn",""],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade","custom-modal"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","h3"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"form-group","mb-2"],["name","content","id","body","placeholder","Write your thoughts here...",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-group"],[1,"border","btn","btn-default","btn-file","w-100","d-flex","flex-column","align-items-center","justify-content-center","uploadSpan","position-relative"],[1,"mb-2"],[1,"fa-solid","fa-cloud-arrow-up","fa-2x"],[1,"mb-0"],[1,"text-muted"],["type","file","name","image","id","image",1,"position-absolute","top-0","start-0","w-100","h-100","opacity-0",3,"change"],[1,"mt-2","text-success","fw-bold"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"closeBut","px-3","py-2","me-3","rounded"],["type","submit",1,"postsBut","px-3","py-2","rounded",3,"click"]],template:function(e,i){if(e&1){let l=w();s(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h5",5),a(5,"Add new Post"),n(),h(6,"button",6),n(),s(7,"div",7)(8,"form")(9,"div",8)(10,"textarea",9),k("ngModelChange",function(d){return c(l),I(i.content,d)||(i.content=d),u(d)}),n()(),s(11,"div",10)(12,"span",11)(13,"p",12),h(14,"i",13),n(),s(15,"p",14),a(16," Click to upload "),s(17,"span",15),a(18,"or drag and drop"),n()(),s(19,"input",16),b("change",function(d){return c(l),u(i.onFileSelected(d))}),n()(),f(20,L,2,1,"p",17),n(),s(21,"div",18)(22,"button",19,0),a(24," Close "),n(),s(25,"button",20),b("click",function(){return c(l),u(i.onSubmit())}),f(26,R,1,0)(27,z,1,0),n()()()()()()()}e&2&&(p(10),O("ngModel",i.content),p(10),g(20,i.fileName?20:-1),p(6),g(26,i.postId===""?26:27))},dependencies:[Q,j,B,$,H,D,U,T],styles:["input[_ngcontent-%COMP%]{border-color:#0006}@media (max-width: 1000px){.w-md-100[_ngcontent-%COMP%]{width:100%!important}}.postsBut[_ngcontent-%COMP%]{border:none rgba(0,0,0,.314);color:#fff;background-color:var(--main-color)}.closeBut[_ngcontent-%COMP%]{border:solid rgba(0,0,0,.314);color:#000;background-color:transparent}.bgeee[_ngcontent-%COMP%]{background-color:#eee}.custom-modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{width:90%!important;max-width:90%}@media (min-width: 992px){.custom-modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{width:50%!important;max-width:50%}}.btn-file[_ngcontent-%COMP%]{position:relative;overflow:hidden}.btn-file[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;top:0;right:0;min-width:100%;min-height:100%;font-size:100px;text-align:right;filter:alpha(opacity=0);opacity:0;outline:none;background:#fff;cursor:inherit;display:block}.uploadSpan[_ngcontent-%COMP%]{height:300px}"]})}}return o})();export{W as a,rt as b};
