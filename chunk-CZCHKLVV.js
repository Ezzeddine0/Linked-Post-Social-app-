import{a as U,b as $}from"./chunk-TVIAF62G.js";import{r as k}from"./chunk-AZPCGIVJ.js";import{k as T}from"./chunk-L3S2AP4B.js";import{$ as y,Ab as a,Bb as u,Hb as D,Ja as g,Jb as E,Kb as F,Ma as o,Y as f,ab as b,bb as v,cb as C,eb as m,ib as h,ja as x,jb as M,ka as w,kb as S,lb as i,mb as n,nb as c,ob as P,rb as _,sb as l,vb as I}from"./chunk-SER4P5WU.js";var V=(t,d)=>d._id,B=()=>[import("./chunk-7AXFIDIW.js").then(t=>t.CommentsComponent)];function L(t,d){if(t&1&&(i(0,"p",18),a(1),n()),t&2){let e=l().$implicit;o(),u(e.body)}}function O(t,d){if(t&1&&c(0,"img",19),t&2){let e=l().$implicit;m("src",e.image,g)}}function j(t,d){if(t&1&&c(0,"app-comments",21),t&2){let e=l().$implicit;m("postId",e._id)}}function z(t,d){t&1&&(i(0,"h5",22),a(1,"Loading ...."),n())}function A(t,d){if(t&1){let e=P();i(0,"article",3)(1,"div",5)(2,"div",6)(3,"div",7),c(4,"img",8),i(5,"div")(6,"p",9),a(7),n(),i(8,"small",10),a(9),E(10,"date"),n()()(),i(11,"div",11)(12,"button",12)(13,"p",13),a(14,"..."),n()(),i(15,"ul",14)(16,"li")(17,"button",15),_("click",function(){let r=x(e).$implicit,p=l();return w(p.selectedPostId=r._id)}),a(18," Edit "),n()(),i(19,"li"),c(20,"hr",16),n(),i(21,"li")(22,"button",17),_("click",function(){let r=x(e).$implicit,p=l();return w(p.deletePost(r._id))}),a(23," Delete "),n()()()()(),b(24,L,2,1,"p",18)(25,O,1,1,"img",19),i(26,"button",20,0),a(28," Show Comments "),n(),b(29,j,1,1)(30,z,2,0),v(31,29,B,30),C(26),n()()}if(t&2){let e=d.$implicit;o(4),m("src",e.user.photo,g)("alt",e.user.name),o(3),u(e.user.name),o(2),u(F(10,6,e.createdAt)),o(15),h(24,e.body!="undefined"?24:-1),o(),h(25,e.image?25:-1)}}var R=(()=>{class t{constructor(){this._PostsService=f(U),this.posts=[],this._UsersService=f(k),this.selectedPostId=""}ngOnInit(){this.loadUserData(),this.showMyPosts()}loadUserData(){this._UsersService.getLoggedUserData().subscribe({next:e=>{console.log(e),this.userData=e.user},error:e=>console.log(e)})}showMyPosts(){this._PostsService.getMyPosts().subscribe({next:e=>{this.posts=e.posts,console.log(e)},error:e=>{}})}deletePost(e){this._PostsService.deletePost(e).subscribe({next:s=>{console.log(s),this.showMyPosts()},error:s=>{}})}static{this.\u0275fac=function(s){return new(s||t)}}static{this.\u0275cmp=y({type:t,selectors:[["app-myposts"]],standalone:!0,features:[D],decls:5,vars:3,consts:[["showComments",""],[1,"w-50","w-md-100","mx-auto","bg-light","p-5","border","mb-4"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal","data-bs-whatever","@mdo","type","text",1,"w-100","p-2","rounded-pill",3,"click","placeholder"],[1,"w-50","w-md-100","mx-auto","bg-light","p-5","border","mb-4","rounded"],[3,"postSaved","postId"],[1,"d-flex","flex-column","gap-3"],[1,"d-flex","align-items-center","justify-content-between","gap-3"],[1,"d-flex","align-items-center","gap-3"],["width","50","height","50",1,"rounded-circle",3,"src","alt"],[1,"fw-bolder","mb-0"],[1,"text-muted"],[1,"dropdown","align-self-end","text-end"],["type","button","id","dropdownMenuButton","data-bs-toggle","dropdown","aria-expanded","false",1,"btn"],[1,"h2","fw-bold","m-0"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu","dropdown-menu-end",2,"width","auto","min-width","fit-content"],["data-bs-toggle","modal","data-bs-target","#exampleModal",1,"dropdown-item","text-main","text-center","fw-bold",3,"click"],[1,"dropdown-divider"],[1,"dropdown-item","text-danger","fw-bold",3,"click"],[1,"fw-bold"],["alt","Post image",1,"w-100","rounded",3,"src"],[1,"btn","commentsBut","fw-bold","mt-3"],[3,"postId"],[1,"text-center","h5","text-muted"]],template:function(s,r){s&1&&(i(0,"div",1)(1,"input",2),_("click",function(){return r.selectedPostId=""}),n()(),M(2,A,33,8,"article",3,V),i(4,"app-posts",4),_("postSaved",function(){return r.showMyPosts()}),n()),s&2&&(o(),I("placeholder","what's on your mind, ",r.userData.name,"?"),o(),S(r.posts),o(2),m("postId",r.selectedPostId))},dependencies:[T,$],styles:["@media (max-width: 1000px){.w-md-100[_ngcontent-%COMP%]{width:100%!important}}"]})}}return t})();export{R as MypostsComponent};
